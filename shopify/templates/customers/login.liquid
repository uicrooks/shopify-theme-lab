<div class="login-page-container">
  {% form 'recover_customer_password' %}
  <div id="password-recovery-form" class="hidden">
    <h2 class="login-page-title">Recover Password</h2>

    <p class="login-text">
      Enter your email address and we will send you an email with instructions to reset your password.
    </p>

    {% if form.errors %}
      {% render "_form.errors", errors: form.errors %}
    {% endif %}

    <div class="form-field-wrapper">
      <input 
        type="email"
        name="email"
        placeholder="Email"
        autocorrect="off"
        autocapitalize="off"
        autocomplete="email"
        required
        class="form-field"
      />
    </div>
    <div class="form-submit-wrapper">
      <input
        type="submit"
        value="Submit"
        class="submit-button"
      />
      <a
        href="#"
        class="password-recovery-link"
      >Cancel</a>
    </div>
  </div>
{% endform %}

  {% form 'customer_login' %}
    <div id="login-form">
      <h2 class="login-page-title">Account Login</h2>

      <div class="login-page-related-links">
        <a
          href="/account/login"
          class="login-page-link active-link"
        >Login</a>
        <a
          href="/account/register"
          class="login-page-link inactive-link"
        >Create Account</a>
      </div>

      <p class="login-text">
        Manage your account and subscription by logging in below!
      </p>

      {% if form.errors %}
        {% render "_form.errors", errors: form.errors %}
      {% endif %}

      <div class="form-field-wrapper">
        <input 
          type="email"
          name="customer[email]"
          placeholder="Email"
          autocorrect="off"
          autocapitalize="off"
          autocomplete="email"
          required
          class="form-field"
        />
      </div>
      <div class="form-field-wrapper">
        <input
          type="password"
          name="customer[password]"
          placeholder="Password"
          autocorrect="off"
          autocapitalize="off"
          autocomplete="email"
          required
          class="form-field"
        />
      </div>
      <div class="form-submit-wrapper">
        <input
          type="submit"
          value="Sign In"
          class="submit-button"
        />
        <a
          href="#recover"
          class="password-recovery-link"
        >Forgot your password?</a>
      </div>
    </div>
  {% endform %}
</div>

<script type="text/javascript">
  toggleForms();
  window.onhashchange = () => {
    toggleForms();
  }

  function toggleForms() {
    let recoveryForm = document.getElementById("password-recovery-form");
    let loginForm = document.getElementById("login-form");
    if (window.location.hash === "#recover") {
      recoveryForm.classList.remove("hidden");
      loginForm.classList.add("hidden");
    } else {
      recoveryForm.classList.add("hidden");
      loginForm.classList.remove("hidden");
    }
  }
</script>
